# ==============================================
# AJO SECURE BACKEND ENVIRONMENT VARIABLES
# ==============================================
# Copy this file to .env and fill in your values
# NEVER commit .env file to version control!

# ==============================================
# APPLICATION SETTINGS
# ==============================================
NODE_ENV=development
PORT=3000
APP_NAME=Ajo Secure
APP_URL=http://localhost:3000
FRONTEND_URL=http://localhost:5173

# ==============================================
# DATABASE CONFIGURATION
# ==============================================
DATABASE_URL=postgresql://username:password@localhost:5432/ajo_secure
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_SSL=false
DATABASE_LOGGING=false

# ==============================================
# REDIS CONFIGURATION
# ==============================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TLS_ENABLED=false

# ==============================================
# JWT & AUTHENTICATION
# ==============================================
# Generate secure random strings for production!
# Use: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=change-this-to-a-random-64-character-string-in-production
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_SECRET=change-this-to-another-random-64-character-string
REFRESH_TOKEN_EXPIRES_IN=7d
ACCESS_TOKEN_COOKIE_NAME=ajo_access_token
REFRESH_TOKEN_COOKIE_NAME=ajo_refresh_token

# ==============================================
# PASSWORD SECURITY
# ==============================================
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=false

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_ENABLE=true

# ==============================================
# CORS CONFIGURATION
# ==============================================
CORS_ORIGIN=http://localhost:5173,http://localhost:8080
CORS_CREDENTIALS=true

# ==============================================
# PAYMENT GATEWAY - PAYSTACK
# ==============================================
PAYSTACK_ENABLED=true
PAYSTACK_PUBLIC_KEY=pk_test_xxxxxxxxxxxxxxxxxxxx
PAYSTACK_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxx
PAYSTACK_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxx
PAYSTACK_CALLBACK_URL=${APP_URL}/api/payments/paystack/callback
PAYSTACK_TEST_MODE=true

# ==============================================
# PAYMENT GATEWAY - FLUTTERWAVE
# ==============================================
FLUTTERWAVE_ENABLED=false
FLUTTERWAVE_PUBLIC_KEY=FLWPUBK_TEST-xxxxxxxxxxxxxxxxxxxx
FLUTTERWAVE_SECRET_KEY=FLWSECK_TEST-xxxxxxxxxxxxxxxxxxxx
FLUTTERWAVE_ENCRYPTION_KEY=FLWSECK_TEST-xxxxxxxxxxxxxxxxxxxx
FLUTTERWAVE_WEBHOOK_SECRET_HASH=xxxxxxxxxxxxxxxxxxxx
FLUTTERWAVE_CALLBACK_URL=${APP_URL}/api/payments/flutterwave/callback
FLUTTERWAVE_TEST_MODE=true

# ==============================================
# EMAIL SERVICE - SENDGRID
# ==============================================
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
EMAIL_FROM=noreply@ajosecure.com
EMAIL_FROM_NAME=Ajo Secure
EMAIL_REPLY_TO=support@ajosecure.com

# ==============================================
# SMS SERVICE - TWILIO
# ==============================================
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_MESSAGING_SERVICE_SID=

# ==============================================
# FILE UPLOAD & STORAGE
# ==============================================
# Storage Provider: 'local', 's3', 'gcs', 'azure'
STORAGE_PROVIDER=local
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,application/pdf

# Local Storage
LOCAL_STORAGE_PATH=./uploads

# AWS S3
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=ajo-secure-uploads
AWS_S3_ENDPOINT=

# Google Cloud Storage
GCS_PROJECT_ID=
GCS_BUCKET_NAME=
GCS_KEYFILE_PATH=

# Azure Blob Storage
AZURE_STORAGE_ACCOUNT_NAME=
AZURE_STORAGE_ACCOUNT_KEY=
AZURE_STORAGE_CONTAINER=

# ==============================================
# MONITORING & LOGGING
# ==============================================
# Sentry for Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_TO_FILE=false
LOG_FILE_PATH=./logs

# ==============================================
# FEATURE FLAGS
# ==============================================
ENABLE_KYC=true
ENABLE_BVN_VERIFICATION=false
ENABLE_EMAIL_VERIFICATION=true
ENABLE_PHONE_VERIFICATION=true
ENABLE_2FA=false
ENABLE_CAPTCHA=false

# ==============================================
# SECURITY SETTINGS
# ==============================================
SESSION_TIMEOUT=3600000
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900000
ENABLE_CSRF_PROTECTION=true
CSRF_TOKEN_SECRET=change-this-to-a-random-string

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_ONLY=false

# ==============================================
# BVN VERIFICATION SERVICE
# ==============================================
# Example: Mono, Okra, Dojah, etc.
BVN_PROVIDER=
BVN_API_KEY=
BVN_SECRET_KEY=
BVN_ENVIRONMENT=test

# ==============================================
# SCHEDULED JOBS / CRON
# ==============================================
ENABLE_CRON_JOBS=true
CRON_PAYMENT_REMINDERS=0 9 * * *
CRON_LATE_PENALTIES=0 1 * * *
CRON_PAYOUT_PROCESSING=0 10 * * *
CRON_PAYMENT_STATUS_CHECK=0 * * * *

# ==============================================
# NOTIFICATION SETTINGS
# ==============================================
NOTIFICATION_QUEUE_ENABLED=true
NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_SMS_ENABLED=true
NOTIFICATION_PUSH_ENABLED=false

# ==============================================
# API DOCUMENTATION
# ==============================================
SWAGGER_ENABLED=true
SWAGGER_PATH=/api-docs
SWAGGER_TITLE=Ajo Secure API
SWAGGER_VERSION=1.0.0

# ==============================================
# TESTING
# ==============================================
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/ajo_secure_test
TEST_REDIS_URL=redis://localhost:6379/1

# ==============================================
# PRODUCTION OPTIMIZATIONS
# ==============================================
# Only enable in production
ENABLE_COMPRESSION=true
ENABLE_HELMET=true
ENABLE_REQUEST_ID=true
TRUST_PROXY=false

# ==============================================
# WEBHOOK SECRETS
# ==============================================
# Generate unique secrets for each webhook
WEBHOOK_SECRET_PAYSTACK=${PAYSTACK_WEBHOOK_SECRET}
WEBHOOK_SECRET_FLUTTERWAVE=${FLUTTERWAVE_WEBHOOK_SECRET_HASH}

# ==============================================
# THIRD-PARTY INTEGRATIONS
# ==============================================
# Analytics
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# Customer Support
INTERCOM_APP_ID=
CRISP_WEBSITE_ID=

# ==============================================
# ADMIN SETTINGS
# ==============================================
ADMIN_EMAIL=admin@ajosecure.com
ADMIN_PHONE=+2348000000000
SUPPORT_EMAIL=support@ajosecure.com
SUPPORT_PHONE=+2348000000001

# ==============================================
# BUSINESS RULES
# ==============================================
DEFAULT_SERVICE_FEE_PERCENTAGE=10
MIN_CONTRIBUTION_AMOUNT=1000
MAX_CONTRIBUTION_AMOUNT=10000000
MIN_GROUP_MEMBERS=2
MAX_GROUP_MEMBERS=50
PENALTY_RATE_PER_DAY=0.05
SECURITY_DEPOSIT_MIN_PERCENTAGE=10
SECURITY_DEPOSIT_MAX_PERCENTAGE=50
SECURITY_DEPOSIT_DEFAULT_PERCENTAGE=20

# ==============================================
# TIMEZONE SETTINGS
# ==============================================
TZ=Africa/Lagos
DEFAULT_CURRENCY=NGN
DEFAULT_LOCALE=en-NG
